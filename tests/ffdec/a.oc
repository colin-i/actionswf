
format elfobj64

importx "_exit" exit

einclude "../../dev/import.h"

entryraw main(sd argc,ss *,ss a1)

sd f=debug_log
if argc=2
	importx "puts" puts
	call puts("alt flag")
	set f (debug_alt)
	sub a1# (0x30)
	or f a1#
end

call swf_new_ex("a.swf",0x80,0x80,0x001100,2,f)

call action("
function c(){
}
function cc(a){
}
function ccc(a,b){
}
var a;
delete a;
delete a.b;
var a=2;
a=3;
a.b=4;
a=ccc(1,2);
b.ccc(1,2);

a=new c();

//a+=2; will go to eval
//a=a+2; will go to PushDuplicate that will go to eval
a=eval('a')+2;

a=1+(1+1)+a+a.b;

return 1;
")

call swf_done()

call exit(0)
