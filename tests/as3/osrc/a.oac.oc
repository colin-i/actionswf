
format elfobj64

importx "_exit" exit

override include_sec 1
einclude "../../../dev/import.oh"

entry main()

call swf_new_ex("a.swf",550,400,0xffFFff,12,(flag_format))

sd presprite;set presprite swf_sprite_new()
char buf#1000
call actionf_sprite(presprite,#buf,"
/*3 import flash.display.MovieClip;
import flash.display.Shape;
import flash.events.Event;
import flash.text.TextField;
import flash.text.TextFormat;
import flash.text.TextFormatAlign;

class MyClip extends MovieClip {*/
	function on_Enter_Frame(e){
		if(a){
			_x-=c;//3 x-=c;
			if(b){
				_y-=c;//3 y-=c;
				if(_y<=0){//3 if(y<=0){
					b=false;
				}
			}else{
				_y+=c;//3 y+=c;
				if(_y+_height>=Stage.height){//3 if(y+height>=stage.stageHeight){
					b=true;
				}
			}
			if(_x<=0){//3 if(x<=0){
				a=false;
			}
		}else{
			_x+=c;//3 x+=c;
			if(b){
				_y-=c;//3 y-=c;
				if(_y<=0){//3 if(y<=0){
					b=false;
				}
			}else{
				_y+=c;//3 y+=c;
				if(_y+_height>=Stage.height){//3 if(y+height>=stage.stageHeight){
					b=true;
				}
			}
			if(_x+_width>=Stage.width){//3 if(x+width>=stage.stageWidth){
				a=true;
			}
		}
	}
/*3	public function new() {
		super();
*/
		// Simple visual so you can see it
		//3 var shape = new Shape();
		beginFill(0x3399FF);//3 shape.graphics.beginFill(0x3399FF);
		lineTo(120, 0);lineTo(120, 80);lineTo(0, 80);//3 shape.graphics.drawRect(0, 0, 120, 80);
		endFill();//3 shape.graphics.endFill();
		//3 addChild(shape);

		// a 1/5 margin
		createTextField('label', 1, 0, 16, 120, 48);//3 var label = new TextField();
		/*3
		label.y = 16;
		label.width = 120;
		label.height = 48;
		*/
		label.text = 'Click';
		label.selectable = false;

		// a 2/3 size format
		var tf = new TextFormat();
		tf.size = 32;
		tf.align = 'center';//3 tf.align = TextFormatAlign.CENTER;
		tf.color = 0xff9933;
		label.setTextFormat(tf);

		//3 addChild(label);

		onEnterFrame=on_Enter_Frame; //3 addEventListener(Event.ENTER_FRAME, on_Enter_Frame);
/*3	}
	static
*/
	var c=%u;
	var a=false;var b=false;
//3 }
",2)
sd sprite;set sprite swf_sprite_done(presprite)
call swf_exports_add(sprite,"MyClip")

call action("
//3 import flash.Lib;

/*3 class Main {
	static
	function main() {
		var stage = Lib.current.stage;
*/
		attachMovie('MyClip','shape',getNextHighestDepth());//3 var shape = new MyClip();
		shape._x = (Stage.width - 100) / 2;//3 shape.x = (stage.stageWidth - 100) / 2;
		shape._y = (Stage.height - 100) / 2;//3 shape.y = (stage.stageHeight - 100) / 2;
/*3
		stage.addChild(shape);

//		var img = new Bitmap( new MyBitmapData(0, 0) );
//		Lib.current.addChild(img);
	}
}

//import flash.display.BitmapData;
//import flash.display.Bitmap;
//@:bitmap('relative/path/to/myfile.png')
//class MyBitmapData extends BitmapData { }//*
*/
")

call swf_done()

call exit(0)
